<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Installation - Newspaper Curation App</title>
<meta name="description" content="How to build and compile NCA">
<meta name="generator" content="Hugo 0.117.0">
<link rel="canonical" href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/installation/">
<link rel="stylesheet" href="https://uoregon-libraries.github.io/newspaper-curation-app/css/theme.css">
<link rel="stylesheet" href="https://uoregon-libraries.github.io/newspaper-curation-app/css/chroma.css">
<link rel="stylesheet" href="https://uoregon-libraries.github.io/newspaper-curation-app/css/treeview-navigation.css">
<script src="https://uoregon-libraries.github.io/newspaper-curation-app/js/headerlink.js"></script>
<script src="https://uoregon-libraries.github.io/newspaper-curation-app/js/treeview-navigation.js"></script><meta property="og:title" content="Installation" />
<meta property="og:description" content="How to build and compile NCA" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://uoregon-libraries.github.io/newspaper-curation-app/setup/installation/" /><meta property="article:section" content="setup" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Installation"/>
<meta name="twitter:description" content="How to build and compile NCA"/>
<meta itemprop="name" content="Installation">
<meta itemprop="description" content="How to build and compile NCA">

<meta itemprop="wordCount" content="633">
<meta itemprop="keywords" content="" /></head>
<body>
  <div class="container"><div class="skip"><a href="#maincontent">Skip to main content</a></div>
<header>
<h1>Newspaper Curation App</h1><a href="https://github.com/uoregon-libraries/newspaper-curation-app/" class="github"><img src="https://uoregon-libraries.github.io/newspaper-curation-app/images/github-mark-white.svg" alt="NCA on Github"></a>
</header>
<div class="content-container"><div class="sidebar">
  
  <nav aria-labelledby="table-of-contents">
    <h2 id="table-of-contents" class="sr-only">Table Of Contents</h2>
    <ul class="treeview-navigation" role="tree" aria-label="Contents">
      <li role="none">
        <a role="treeitem"  href="https://uoregon-libraries.github.io/newspaper-curation-app/">
          <span class="label">Home</span>
        </a>
      </li><li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/"
        aria-owns="subtree--newspaper-curation-app-setup-"
          aria-expanded="true">
        <span class="label"><span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 24 24">
              <polygon points="2,3 22,11 2,20"></polygon>
            </svg>
          </span>Setup and Installation
        </span>
      </a><ul role="group" aria-label="Setup and Installation" id="subtree--newspaper-curation-app-setup-"><li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/services/"
        >
        <span class="label">Services and Apps
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/server-setup/"
        >
        <span class="label">Server Setup
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/installation/"
        aria-current="page"
        >
        <span class="label">Installation
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/user-setup/"
        >
        <span class="label">Users
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/creating-publishers/"
        >
        <span class="label">Onboarding A Publisher
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/sftpgo-integration/"
        >
        <span class="label">SFTPGo Integration
        </span>
      </a></li>
  </ul></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/specs/"
        aria-owns="subtree--newspaper-curation-app-specs-"
          aria-expanded="false">
        <span class="label"><span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 24 24">
              <polygon points="2,3 22,11 2,20"></polygon>
            </svg>
          </span>NCA Terms, Specs, and Information
        </span>
      </a><ul role="group" aria-label="NCA Terms, Specs, and Information" id="subtree--newspaper-curation-app-specs-"><li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/specs/glossary/"
        >
        <span class="label">Glossary
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/specs/upload-specs/"
        >
        <span class="label">Uploads: Folder and File Specs
        </span>
      </a></li>
  </ul></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/"
        aria-owns="subtree--newspaper-curation-app-workflow-"
          aria-expanded="false">
        <span class="label"><span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 24 24">
              <polygon points="2,3 22,11 2,20"></polygon>
            </svg>
          </span>Workflow
        </span>
      </a><ul role="group" aria-label="Workflow" id="subtree--newspaper-curation-app-workflow-"><li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/technical/"
        >
        <span class="label">Technical Details
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/adding-titles/"
        >
        <span class="label">Adding Titles
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/handling-page-review-problems/"
        >
        <span class="label">Handling Page Review Problems
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/fixing-stuck-issues/"
        >
        <span class="label">Fixing &#34;Stuck&#34; Issues
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/fixing-flagged-workflow-issues/"
        >
        <span class="label">Fixing Flagged Workflow Issues
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/fixing-live-batches/"
        >
        <span class="label">Replacing Live Issues
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/workflow/undo-batch-golive/"
        >
        <span class="label">&#34;Un-push&#34; Batch From Production
        </span>
      </a></li>
  </ul></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/"
        aria-owns="subtree--newspaper-curation-app-contributing-"
          aria-expanded="false">
        <span class="label"><span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 24 24">
              <polygon points="2,3 22,11 2,20"></polygon>
            </svg>
          </span>Contributing
        </span>
      </a><ul role="group" aria-label="Contributing" id="subtree--newspaper-curation-app-contributing-"><li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/dev-guide/"
        >
        <span class="label">Developer&#39;s Guide
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/not-compiling-locally/"
        >
        <span class="label">Not Compiling Locally
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/documentation/"
        >
        <span class="label">Contributing to Documentation
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/testing/"
        >
        <span class="label">Testing
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/dev-howto/"
        aria-owns="subtree--newspaper-curation-app-contributing-dev-howto-"
          aria-expanded="false">
        <span class="label"><span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 24 24">
              <polygon points="2,3 22,11 2,20"></polygon>
            </svg>
          </span>How do I...?
        </span>
      </a><ul role="group" aria-label="How do I...?" id="subtree--newspaper-curation-app-contributing-dev-howto-"><li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/dev-howto/add-job-types/"
        >
        <span class="label">Add Job Types
        </span>
      </a></li>
  <li role="none">
      <a
        role="treeitem"
        href="https://uoregon-libraries.github.io/newspaper-curation-app/contributing/dev-howto/add-config-items/"
        >
        <span class="label">Add Configuration Settings
        </span>
      </a></li>
  </ul></li>
  </ul></li>
  </ul>
  </nav>
</div>


<main id="maincontent"><h1>Installation</h1><h2 id="development">Development</h2>
<p>If you&rsquo;re developing on NCA, installation will differ from standing up a
production server. Please see our <a href="../../contributing/dev-guide">Development Guide</a>.</p>
<h2 id="preliminary-setup">Preliminary Setup</h2>
<p>Manual installation has several prerequisites:</p>
<ul>
<li>Poppler Utils for PDF processing</li>
<li>OpenJPEG 2 + command-line tools for JP2 generation</li>
<li>GhostScript</li>
<li>GraphicsMagick</li>
<li>MariaDB</li>
<li>A IIIF server capable of handling tiled JP2 files without a ton of overhead (e.g.,
<a href="https://github.com/uoregon-libraries/rais-image-server">RAIS</a>)</li>
<li>Apache/nginx for authentication as well as proxying to NCA and the IIIF server</li>
</ul>
<p><strong>Please note</strong>: The easiest way to get a quick demo / test setup of NCA is via
our Docker configuration / setup:</p>
<ul>
<li><a href="https://github.com/uoregon-libraries/newspaper-curation-app/blob/main/docker-compose.yml">https://github.com/uoregon-libraries/newspaper-curation-app/blob/main/docker-compose.yml</a></li>
<li><a href="https://github.com/uoregon-libraries/newspaper-curation-app/tree/main/docker">https://github.com/uoregon-libraries/newspaper-curation-app/tree/main/docker</a></li>
</ul>
<p>This is great to try things out, or for a quick one-off use of NCA, but <strong>it is
not recommended for production use</strong>.</p>
<p>We strongly recommend either crafting your own containerized setup with a mind
to production reliability (which we haven&rsquo;t done) or just running NCA on bare
metal - one the prerequisites above are installed, the rest of NCA is very easy
to get running. If you go this route, you&rsquo;ll still find the docker setup
helpful just in terms of understanding the full stack and configuration.</p>
<h2 id="compile">Compile</h2>
<p>Compilation requires:</p>
<ul>
<li><a href="https://golang.org/dl/">Go</a> 1.18 or later. Go is only required for
compilation: its runtime does not need to be installed in production as long
as you compile on the same architecture your production system has (or change
the <code>Makefile</code> to cross-compile for the targeted architecture).</li>
<li><a href="https://github.com/mgechev/revive">revive</a>: <code>go install github.com/mgechev/revive@latest</code></li>
<li><code>goimports</code> (replaces <code>gofmt</code>): <code>go install golang.org/x/tools/cmd/goimports@latest</code></li>
</ul>
<p>The easiest way to compile is simply running <code>make</code> in the source directory.
This will grab various Go packages the application requires, validate the
current code (via revive, goimports, and go vet, for development purposes), and
build all the binaries.</p>
<p>A full compilation from a clean repository should take about 15 seconds, though
this can depend on network speed the first time dependencies are pulled from
github. Subsequent compiles generally take under 5 seconds. If that&rsquo;s still
too long, and you don&rsquo;t mind skipping the code validations, <code>make fast</code> will
skip the validator entirely, usually saving 1-2 seconds.</p>
<p>If you&rsquo;re in a <em>serious</em> rush (say you want to auto-build every time code
changes just to see if compilation failed), you can also just build a single
binary via <code>make &lt;binary target&gt;</code>, e.g., <code>make bin/server</code>. This skips all
validations and only builds the binary you request, and generally takes less
than a second.</p>
<p>Once you&rsquo;ve compiled, the two key binaries are going to be <code>bin/server</code> for the
HTTP listener, and <code>bin/run-jobs</code>, the job queue processor.</p>
<p>Note that even if you do use Docker, for development you&rsquo;ll probably want to
run all NCA&rsquo;s binaries locally and just have them communicate with the
dockerized services (IIIF server, database, and SFTPGo). Again, see our
<a href="../../contributing/dev-guide">Development Guide</a> for details.</p>
<h3 id="security-updates">Security Updates</h3>
<p>Every now and then a security issue arises in the Go standard library. It&rsquo;s
rare that something critical shows up, but it isn&rsquo;t a bad idea to regularly
(say every month or so) just grab the latest Go compiler, recompile NCA via
<code>make</code>, and push the new binaries to production. This ensures any fixes or
security updates get into your instance of NCA without your having to check on
the NCA project itself, or even watch for Go updates.</p>
<h2 id="database-setup">Database Setup</h2>
<p>Creating / migrating the database is easily done using the &ldquo;migrate-database&rdquo;
binary compiled in a standard <code>make</code> run. This binary is a wrapper around Goose
functionality, but you will generally only need to use the &ldquo;up&rdquo; command.
Advanced users / devs may want to read more about <a href="https://github.com/pressly/goose">goose</a> to learn how
it works and what other commands may be used.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>./bin/migrate-database -c ./settings up
</span></span></code></pre></div><p>If you use docker, the entrypoint script should migrate automatically whenever
the container starts up. If you&rsquo;re doing development and break the automatic
migration, just run <code>migrate-database</code> inside the web container.</p>
<nav class="pagination" aria-label="Pagination">

  <a class="nav nav-prev" href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/server-setup/">← Prev - Server Setup</a>

  <a class="nav nav-next" href="https://uoregon-libraries.github.io/newspaper-curation-app/setup/user-setup/">Next - Users →</a></nav>
<footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>.
</footer>
      </main>
    </div>

  </div>
</body>
</html>
